# Техническое задание: Экспорт спектрограммы для отладки

## 1. Обзор задачи

### Цель
Добавить в модуль выделения голоса (vodec) функцию экспорта спектрограммы в форматы NPY и TIFF для целей отладки и визуального анализа алгоритмов обработки сигналов.

### Контекст проекта
Модуль vodec является частью системы обработки аудио, выполняющей обнаружение голосовых артефактов. Спектрограмма представляет собой частотное представление аудиосигнала и является ключевым промежуточным результатом обработки.

## 2. Требования к функциональности

### Функциональные требования
- **Экспорт в NPY формат**: Сохранение сырых числовых данных спектрограммы для последующего анализа в Python/NumPy экосистеме
- **Экспорт в TIFF формат**: Сохранение визуального представления спектрограммы для просмотра в графических редакторах
- **Условная компиляция**: Функциональность должна включаться только при установленном флаге компиляции `DEBUG_SPECTROGRAM_SAVE`
- **Автоматическое именование**: Файлы должны сохраняться с временной меткой в формате `spectrogram_<timestamp>.npy` и `spectrogram_<timestamp>.tiff`

### Нефункциональные требования
- **Совместимость API**: Функция не должна нарушать существующий API модуля vodec
- **Производительность**: Экспорт не должен существенно замедлять основную обработку
- **Зависимости**: Использование только header-only библиотек без дополнительных runtime зависимостей

## 3. Ограничения и ограничения

### Технические ограничения
- **Header-only библиотеки**: Использование только библиотек, не требующих компиляции отдельных модулей
- **C++20 совместимость**: Код должен быть совместим с используемой версией C++20
- **Qt6 совместимость**: Интеграция с существующей Qt6 архитектурой проекта

### Бизнес-ограничения
- **Отладочная функциональность**: Код не должен попадать в production сборки
- **Минимальные изменения**: Минимизация изменений в существующей кодовой базе
- **Обратная совместимость**: Сохранение работоспособности существующего функционала

## 4. Критерии приемки

### Основные критерии
- [ ] Файлы NPY и TIFF создаются корректно при установленном флаге `DEBUG_SPECTROGRAM_SAVE`
- [ ] Данные в NPY файле соответствуют исходным данным спектрограммы
- [ ] TIFF файл корректно отображается в стандартных просмотрщиках изображений
- [ ] При отключенном флаге компиляции код не включается в сборку
- [ ] Существующий API модуля vodec остается неизменным

### Дополнительные критерии
- [ ] Файлы сохраняются в рабочую директорию приложения
- [ ] Временные метки в именах файлов уникальны
- [ ] Обработка ошибок при неудачном сохранении файлов
- [ ] Нормализация данных для корректного отображения в TIFF

## 5. Выходные артефакты

### Код
- Реализация класса или функций экспорта спектрограммы
- Интеграция с существующим модулем vodec
- Настройки системы сборки для условной компиляции

### Файлы данных
- `spectrogram_<timestamp>.npy` - сырые данные спектрограммы
- `spectrogram_<timestamp>.tiff` - визуальное представление спектрограммы

### Документация
- Инструкция по интеграции
- Примеры использования
- Описание форматов выходных файлов

---

*Документ создан: [Дата]*
*Версия: 1.0*
*Статус: Черновик*
